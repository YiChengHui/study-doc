## 什么是操作系统

### 操作系统的定义
>   操作系统（Operating System, OS）是一种复杂的**系统软件**，是不同**程序代码、数据结构、数据初始化文件**的集合，可执行。

### 用户与硬件之间的接口
>   操作系统屏蔽了对硬件操作的细节，提供了计算机用户与计算机硬件之间的**接口**，并且通过这个接口使**应用程序**的开发变的简单、高效。


操作系统必须完成的目标：（承上启下）  
1）操作系统**与硬件部分相互作用，**  
2）为运行在计算机上的**应用程序提供执行环境。**

### 资源的管理者
>   现代计算机系统的一个重要特点就是支持**多任务**，即允许在同一个系统内同时驻留多个应用程序。

-   处理机管理  
    决定把处理机先给哪个程序用，后给哪个程序用

-   内存管理  
    给程序分配内存空间

-   设备管理  
    完成怎么分配设备，分配哪台设备，怎么和设备连接等

-   文件管理  
    为每个文件分配空间、建立目录，对目录进行组织管理以及根据用户请求从外存读取数据或将数据写入外存

## 操作系统的发展

### 单道批处理系统
>   单道批处理系统**内存中只有一道作业**，CPU和内存资源被用户作业**独占**

-   特点: **自动性、顺序性、单道性**

-   优点: 减少了等待人工操作的时间

-   缺点: CPU资源不能得到充分利用

### 多道批处理系统
>   由操作系统的**作业调度**程序按一定策略从**后备作业队列**中选择**若干**个作业调入内存，使它们共享CPU和系统中的各种资源

-   特点: **多道性、无序性、调度性、复杂性**

-   优点: 提高CPU、内存、IO设备的利用率和系统吞吐量

-   缺点: 系统平均周转时间长；缺乏交互能力


### 分时操作系统
>   允许**多个用户**通过终端机**同时使用**计算机，每个用户通过终端与主机交互时都能得到**快速响应**

-   特点: **多路性、独立性、及时性、交互性**

-   优点: 向用户提供了人机交互的方便性，使多个用户可以通过不同的终端共享主机

### 实时操作系统
>   实时系统必须**及时响应**外部事件的请求，在规定时间内完成对该事件的处理。主要用于**实时控制和实时信息**处理领域

-   特点: **多路性、独立性、及时性、交互性、可靠性**


## 操作系统的特征
>   现代操作系统都支持**多任务，具有并发、共享、虚拟和异步性**特征。

### 并发
>   两个或多个事件在**同一时间间隔**内发生

### 共享
>   系统中的**资源**可供内存中**多个**并发执行的**进程共同使用**

互斥共享：任意时刻一种资源只能被一个进程访问  
同时共享：从宏观上看，资源可以被多个进程同时访问

并发与共享的关系是**相互依赖**的


### 虚拟
>   最常用**内存虚拟化**，用户感觉到的内存大于实际内存

### 异步性
>   进程以**不可预知的速度**向前推进

## 操作系统的功能

### 管理计算机资源

##### 内存管理

1.  含义:   
内存管理的主要任务是为多道程序的运行提供良好的环境，方便用户使用内存，提高**内存的利用率**，以及从**逻辑上扩充内存**以实现**虚拟存储**。

2.  内容：  
    -   **内存分配：** 静态分配、动态分配

    -   **内存保护**   
        1）一是使操作系统**内核的空间**不会被用户随意访问，以保证系统的安全和稳定；  
        2）二是确保**每道用户程序都在自己的内存空间**中运行，互不干扰

    -   **地址映射**   
        逻辑地址到物理地址的映射

    -   **内存扩充**  
        从**逻辑**上扩充内存容量，使系统能够向用户提供比物理内存大的存储容量。

#### 进程管理
1.  内容：  
进程的描述与组织、进程控制、进程同步、进程通信及进程调度。


#### 设备管理
1.  含义：  
设备管理主要完成用户的**I/O请求，为用户分配I/O设备**

2.  内容：  
1）缓冲管理  2）设备分配  3）设备处理  4）设备独立性和虚拟设备

#### 文件管理
1.  文件存储空间的管理
>   为每个文件分配必要的**外存空间，提高外存利用率**，并能有助于**提高访问文件的速度**。

2.  目录管理
>   为每个文件建立目录项并对众多**目录项**进行有效组织。目录项包括文件名、文件属性及文件的地址等信息。

3.  文件的读、写管理和存取控制
>   根据用户的请求，**从外存中读取数据或将数据写入外存**。防止未经审核的用户存取文件，防止冒名顶替存取文件，防止以不正确的方式使用文件

### 提供用户接口

#### 命令接口
>   目的：为了便于用户与计算机系统的交互

>   分类：**联机**用户接口和**脱机**用户接口

-   联机：常命令接口由一组**键盘操作命令和命令解释程序**组成
-   脱机：为批处理作业的用户提供，也称为**批处理用户接口**

#### 图形用户接口
>   用户可以轻松地通过**选择窗口、菜单、对话框、滚动条、图标等**简单的操作来完成对作业和任务的提交与控制

#### 程序接口
>   向程序员提供应用程序与操作系统之间的接口，就是**系统调用**。

## 操作系统的体系结构
>   操作系统的体系结构是操作系统作为一种**软件**的体系结构，对操作系统的可靠性、灵活性和可移植性等方面都有重要影响

### 简单的监控程序模型
>   **功能简陋**，任意时刻系统中只能运行一个任务，保证了对系统信息的互斥访问，保护了系统数据的安全

### 单体结构模型
>   **所有的软件和数据结构都放置在一个逻辑模块中**，对外层的用户程序提供一个完整的内核界面—系统调用

例如：UNIX系统、MS-DOS、Linux、Mac OS X和BSD等系统

### 层次结构模型
>   基本思想是**将操作系统分解为多个小的、容易理解的层**，系统功能被隔离在不同层中。

### 客户/服务器模型与微内核结构
>   核心思想是核心功能外移，即把**传统操作系统内核中**的一些组成部分放到内核之外作为一个独立的服务器进程来实现。

例如：windows NT、COS-IX V2.3、Vxworks

### 动态可扩展结构模型
>   基本思想就是在运行过程中，能够**动态地实现**系统行为扩展的结构，也可称之为弹性结构。

## 指令的执行
>   **程序是指令**的集合，程序的执行就是按照某种控制流执行指令的过程。

>   一个**单一指令**需要的**处理**称为**指令周期**。  
>   一个指令周期可以划分为两个步骤，分别是**取指周期和执行周期**。

>   **程序计数器（PC）**保存有下一次要取的指令的地址。  
>   取到的指令被放置在处理器的**指令寄存器（IR）**中。

>   指令中包含确定处理器要采取动作的位，**处理器解释指令并执行要求的动作**。

动作可分为4类：
1.  **处理器与存储器**之间的**指令或数据传送**操作
2.  **处理器与I/O设备**之间的**指令或数据传送**操作
3.  **算术运算**操作或**逻辑运算**操作
4.  **控制**操作，即**修改指令的执行顺序**的操作